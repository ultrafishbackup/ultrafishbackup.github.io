

<!DOCTYPE html>
<html lang="zh-CN,en,default" data-default-color-scheme=auto>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/4.jpg">
  <link rel="icon" href="/img/4.jpg">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#000000">
  <meta name="author" content="Mike_Zhang">
  <meta name="keywords" content="blog, Mike_Zhang, UltraFish">
  
    <meta name="description" content="Made by Mike_Zhang   数据结构与算法相关文章：   数据结构：数据结构与算法-Linked List数据结构与算法-Binary Tree数据结构与算法-Array数据结构与算法-Disjoint Set 算法：即将更新     本文记录并查集(Disjoint Set)的学习，包括Graph的简介，Union和Find的实现，以及其的优化。     1 Introductio">
<meta property="og:type" content="article">
<meta property="og:title" content="数据结构与算法 - Disjoint Set (持续更新)">
<meta property="og:url" content="https://ultrafish.cn/2022/03/25/Disjoint-Set/index.html">
<meta property="og:site_name" content="UltraFish">
<meta property="og:description" content="Made by Mike_Zhang   数据结构与算法相关文章：   数据结构：数据结构与算法-Linked List数据结构与算法-Binary Tree数据结构与算法-Array数据结构与算法-Disjoint Set 算法：即将更新     本文记录并查集(Disjoint Set)的学习，包括Graph的简介，Union和Find的实现，以及其的优化。     1 Introductio">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://ultrafish.cn/img/disjoint-set.png">
<meta property="article:published_time" content="2022-03-25T07:26:37.000Z">
<meta property="article:modified_time" content="2022-04-08T01:22:19.540Z">
<meta property="article:author" content="Mike_Zhang">
<meta property="article:tag" content="数据结构">
<meta property="article:tag" content="Java">
<meta property="article:tag" content="Graph">
<meta property="article:tag" content="Disjoint-Set">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://ultrafish.cn/img/disjoint-set.png">
  
  
  <title>数据结构与算法 - Disjoint Set (持续更新) - UltraFish</title>

  <link  rel="stylesheet" href="https://lib.baomitu.com/twitter-bootstrap/4.6.1/css/bootstrap.min.css" />



  <link  rel="stylesheet" href="https://lib.baomitu.com/github-markdown-css/4.0.0/github-markdown.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/hint.css/2.7.0/hint.min.css" />

  <link  rel="stylesheet" href="https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.css" />



<!-- 主题依赖的图标库，不要自行修改 -->
<!-- Do not modify the link that theme dependent icons -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_hj8rtnfg7um.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_kmeydafke9r.css">


<link  rel="stylesheet" href="/css/main.css" />


  <link id="highlight-css" rel="stylesheet" href="/css/highlight.css" />
  
    <link id="highlight-css-dark" rel="stylesheet" href="/css/highlight-dark.css" />
  




  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    var CONFIG = {"hostname":"ultrafish.cn","root":"/","version":"1.8.14","typing":{"enable":true,"typeSpeed":50,"cursorChar":"_","loop":false,"scope":[]},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"right","visible":"hover","icon":""},"progressbar":{"enable":true,"height_px":3,"color":"#29d","options":{"showSpinner":false,"trickleSpeed":100}},"code_language":{"enable":true,"default":"TEXT"},"copy_btn":true,"image_caption":{"enable":true},"image_zoom":{"enable":true,"img_url_replace":["",""]},"toc":{"enable":true,"placement":"right","headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"lazyload":{"enable":true,"loading_img":"/img/loading.gif","onlypost":false,"offset_factor":2},"web_analytics":{"enable":true,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":"VXQrzMqOSkaPcbILQ3sQJyhw-gzGzoHsz","app_key":"y6z7EoVjISdQPvN4meqBOkvy","server_url":"https://vxqrzmqo.lc-cn-n1-shared.com","path":"window.location.pathname","ignore_local":true}},"search_path":"/local-search.xml"};
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>

  
<meta name="generator" content="Hexo 6.1.0"></head>


<body>
  

  <header>
    

<div class="header-inner" style="height: 70vh;">
  <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand" href="/">
      <strong>UltraFish</strong>
    </a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                首页
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                文章
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                分类
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                标签
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/collection/">
                <i class="iconfont icon-th-large"></i>
                收藏夹
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                关于我
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/links/">
                <i class="iconfont icon-friends"></i>
                伙伴
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle" target="_self" href="javascript:;" role="button"
                 data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                <i class="iconfont icon-code"></i>
                UltraFish Plus
              </a>
              <div class="dropdown-menu" aria-labelledby="navbarDropdown">
                
                  
                  
                  
                  <a class="dropdown-item" target="_blank" rel="noopener" href="https://plus.ultrafish.cn">
                    <i class="iconfont icon-home-fill"></i>
                    UltraFish Plus 主页
                  </a>
                
                  
                  
                  
                  <a class="dropdown-item" target="_blank" rel="noopener" href="https://plus.ultrafish.cn/GPA-Calculator">
                    <i class="iconfont icon-briefcase"></i>
                    GPA计算器
                  </a>
                
                  
                  
                  
                  <a class="dropdown-item" target="_blank" rel="noopener" href="https://plus.ultrafish.cn/Base-convertor">
                    <i class="iconfont icon-briefcase"></i>
                    多进制转换
                  </a>
                
                  
                  
                  
                  <a class="dropdown-item" target="_blank" rel="noopener" href="https://plus.ultrafish.cn/IEEE-754-Single-Representation">
                    <i class="iconfont icon-briefcase"></i>
                    IEEE 754
                  </a>
                
                  
                  
                  
                  <a class="dropdown-item" target="_blank" rel="noopener" href="https://plus.ultrafish.cn/IEEE-754-Single-Representation">
                    <i class="iconfont icon-briefcase"></i>
                    有符号数转换
                  </a>
                
              </div>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" target="_self" href="javascript:;" data-toggle="modal" data-target="#modalSearch" aria-label="Search">
              &nbsp;<i class="iconfont icon-search"></i>&nbsp;
            </a>
          </li>
          
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" target="_self" href="javascript:;" aria-label="Color Toggle">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

  

<div id="banner" class="banner" parallax=true
     style="background: url('/img/disjoint-set.png') no-repeat center center; background-size: cover;">
  <div class="full-bg-img">
    <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
      <div class="banner-text text-center fade-in-up">
        <div class="h2">
          
            <span id="subtitle" data-typed-text="数据结构与算法 - Disjoint Set (持续更新)"></span>
          
        </div>

        
          
  <div class="mt-3">
    
    
      <span class="post-meta">
        <i class="iconfont icon-date-fill" aria-hidden="true"></i>
        <time datetime="2022-03-25 15:26" pubdate>
          2022年3月25日 下午
        </time>
      </span>
    
  </div>

  <div class="mt-1">
    
      <span class="post-meta mr-2">
        <i class="iconfont icon-chart"></i>
        
          <!-- compatible with older versions-->
          11k 字
        
      </span>
    

    
      <span class="post-meta mr-2">
        <i class="iconfont icon-clock-fill"></i>
        
        
        
          <!-- compatible with older versions-->
          93 分钟
        
      </span>
    

    
    
      
        <span id="leancloud-page-views-container" class="post-meta" style="display: none">
          <i class="iconfont icon-eye" aria-hidden="true"></i>
          阅读数：<span id="leancloud-page-views"></span> 次
        </span>
        
      
    
  </div>


        
      </div>

      
    </div>
  </div>
</div>

</div>

  </header>

  <main>
    
      

<div class="container-fluid nopadding-x">
  <div class="row nomargin-x">
    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar category-bar" style="margin-right: -1rem">
    





<div class="category-list">
  
  
    
    
    
    <div class="category row nomargin-x">
      <a class="category-item 
          list-group-item category-item-action col-10 col-md-11 col-xm-11" title="Data Structure and Algorithm"
        id="heading-d2efa03b11d47c7d4b4edeb65cd34307" role="tab" data-toggle="collapse" href="#collapse-d2efa03b11d47c7d4b4edeb65cd34307"
        aria-expanded="true"
      >
        Data Structure and Algorithm
        <span class="list-group-count">(6)</span>
        <i class="iconfont icon-arrowright"></i>
      </a>
      
      <div class="category-collapse collapse show" id="collapse-d2efa03b11d47c7d4b4edeb65cd34307"
           role="tabpanel" aria-labelledby="heading-d2efa03b11d47c7d4b4edeb65cd34307">
        
        
          
          
  <div class="category-post-list">
    
    
  </div>

          
  
    
    
    
    <div class="category-sub row nomargin-x">
      <a class="category-subitem collapsed
          list-group-item category-item-action col-10 col-md-11 col-xm-11" title="Algorithm"
        id="heading-4afa80e77a07f7488ce4d1bdd8c4977a" role="tab" data-toggle="collapse" href="#collapse-4afa80e77a07f7488ce4d1bdd8c4977a"
        aria-expanded="false"
      >
        Algorithm
        <span class="list-group-count">(2)</span>
        <i class="iconfont icon-arrowright"></i>
      </a>
      
      <div class="category-collapse collapse " id="collapse-4afa80e77a07f7488ce4d1bdd8c4977a"
           role="tabpanel" aria-labelledby="heading-4afa80e77a07f7488ce4d1bdd8c4977a">
        
        
          
  <div class="category-post-list">
    
    
      
      
        <a href="/2020/08/05/josephus-problem/" title="Python对约瑟夫问题(Josephus Problem)的高效解决方法"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">Python对约瑟夫问题(Josephus Problem)的高效解决方法</span>
        </a>
      
    
      
      
        <a href="/2021/11/04/domino-matching/" title="多米诺配对问题 Domino Matching with Python"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">多米诺配对问题 Domino Matching with Python</span>
        </a>
      
    
  </div>

        
      </div>
    </div>
  
    
    
    
    <div class="category-sub row nomargin-x">
      <a class="category-subitem 
          list-group-item category-item-action col-10 col-md-11 col-xm-11" title="Data Structure"
        id="heading-e226710d16f039ef02ab4b3ec3a63ed1" role="tab" data-toggle="collapse" href="#collapse-e226710d16f039ef02ab4b3ec3a63ed1"
        aria-expanded="true"
      >
        Data Structure
        <span class="list-group-count">(4)</span>
        <i class="iconfont icon-arrowright"></i>
      </a>
      
      <div class="category-collapse collapse show" id="collapse-e226710d16f039ef02ab4b3ec3a63ed1"
           role="tabpanel" aria-labelledby="heading-e226710d16f039ef02ab4b3ec3a63ed1">
        
        
          
          
  <div class="category-post-list">
    
    
  </div>

          
  
    
    
    
    <div class="category-sub row nomargin-x">
      <a class="category-subitem collapsed
          list-group-item category-item-action col-10 col-md-11 col-xm-11" title="Array"
        id="heading-4410ec34d9e6c1a68100ca0ce033fb17" role="tab" data-toggle="collapse" href="#collapse-4410ec34d9e6c1a68100ca0ce033fb17"
        aria-expanded="false"
      >
        Array
        <span class="list-group-count">(1)</span>
        <i class="iconfont icon-arrowright"></i>
      </a>
      
      <div class="category-collapse collapse " id="collapse-4410ec34d9e6c1a68100ca0ce033fb17"
           role="tabpanel" aria-labelledby="heading-4410ec34d9e6c1a68100ca0ce033fb17">
        
        
          
  <div class="category-post-list">
    
    
      
      
        <a href="/2022/03/14/Array/" title="数据结构与算法 - Array (持续更新)"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">数据结构与算法 - Array (持续更新)</span>
        </a>
      
    
  </div>

        
      </div>
    </div>
  
    
    
    
    <div class="category-sub row nomargin-x">
      <a class="category-subitem collapsed
          list-group-item category-item-action col-10 col-md-11 col-xm-11" title="Binary Tree"
        id="heading-ec47297e27d93f23f404ea8a4f690619" role="tab" data-toggle="collapse" href="#collapse-ec47297e27d93f23f404ea8a4f690619"
        aria-expanded="false"
      >
        Binary Tree
        <span class="list-group-count">(1)</span>
        <i class="iconfont icon-arrowright"></i>
      </a>
      
      <div class="category-collapse collapse " id="collapse-ec47297e27d93f23f404ea8a4f690619"
           role="tabpanel" aria-labelledby="heading-ec47297e27d93f23f404ea8a4f690619">
        
        
          
  <div class="category-post-list">
    
    
      
      
        <a href="/2022/03/08/Binary-Tree/" title="数据结构与算法 - Binary Tree (持续更新)"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">数据结构与算法 - Binary Tree (持续更新)</span>
        </a>
      
    
  </div>

        
      </div>
    </div>
  
    
    
    
    <div class="category-sub row nomargin-x">
      <a class="category-subitem 
          list-group-item category-item-action col-10 col-md-11 col-xm-11" title="Disjoint Set"
        id="heading-3684c3efbf3c1eddc09c9137d7b01d82" role="tab" data-toggle="collapse" href="#collapse-3684c3efbf3c1eddc09c9137d7b01d82"
        aria-expanded="true"
      >
        Disjoint Set
        <span class="list-group-count">(1)</span>
        <i class="iconfont icon-arrowright"></i>
      </a>
      
      <div class="category-collapse collapse show" id="collapse-3684c3efbf3c1eddc09c9137d7b01d82"
           role="tabpanel" aria-labelledby="heading-3684c3efbf3c1eddc09c9137d7b01d82">
        
        
          
  <div class="category-post-list">
    
    
      
      
        <a href="/2022/03/25/Disjoint-Set/" title="数据结构与算法 - Disjoint Set (持续更新)"
           class="list-group-item list-group-item-action
           active">
          <span class="category-post">数据结构与算法 - Disjoint Set (持续更新)</span>
        </a>
      
    
  </div>

        
      </div>
    </div>
  
    
    
    
    <div class="category-sub row nomargin-x">
      <a class="category-subitem collapsed
          list-group-item category-item-action col-10 col-md-11 col-xm-11" title="Linked List"
        id="heading-329e1d8c80090d1f92f32bfb53c98b4d" role="tab" data-toggle="collapse" href="#collapse-329e1d8c80090d1f92f32bfb53c98b4d"
        aria-expanded="false"
      >
        Linked List
        <span class="list-group-count">(1)</span>
        <i class="iconfont icon-arrowright"></i>
      </a>
      
      <div class="category-collapse collapse " id="collapse-329e1d8c80090d1f92f32bfb53c98b4d"
           role="tabpanel" aria-labelledby="heading-329e1d8c80090d1f92f32bfb53c98b4d">
        
        
          
  <div class="category-post-list">
    
    
      
      
        <a href="/2022/03/08/Linked-List/" title="数据结构与算法 - Linked List (持续更新)"
           class="list-group-item list-group-item-action
           ">
          <span class="category-post">数据结构与算法 - Linked List (持续更新)</span>
        </a>
      
    
  </div>

        
      </div>
    </div>
  
        
      </div>
    </div>
  
        
      </div>
    </div>
  
</div>


  </aside>


    </div>

    <div class="col-lg-8 nopadding-x-md">
      <div class="container nopadding-x-md" id="board-ctn">
        <div id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">数据结构与算法 - Disjoint Set (持续更新)</h1>
            
            <div class="markdown-body">
              
              <p><strong><em>Made by Mike_Zhang</em></strong></p>
<hr>
<blockquote>
<p>数据结构与算法相关文章：</p>
<blockquote>
<ul>
<li>数据结构：<br><a href="https://ultrafish.cn/2022/03/08/Linked-List/">数据结构与算法-Linked List</a><br><a href="https://ultrafish.cn/2022/03/08/Binary-Tree/">数据结构与算法-Binary Tree</a><br><a href="https://ultrafish.cn/2022/03/14/Array/">数据结构与算法-Array</a><br><a href="https://ultrafish.cn/2022/03/25/Disjoint-Set/">数据结构与算法-Disjoint Set</a></li>
<li>算法：<br>即将更新</li>
</ul>
</blockquote>
</blockquote>
<hr>
<p>本文记录并查集(Disjoint Set)的学习，包括Graph的简介，Union和Find的实现，以及其的优化。</p>
<hr>
<iframe src="/nodeppt/demo/slide.html" width="100%" height="500" name="topFrame" scrolling="yes" noresize="noresize" frameborder="0" id="topFrame"></iframe>


<h1 id="1-Introduction-of-Graph"><a href="#1-Introduction-of-Graph" class="headerlink" title="1 Introduction of Graph"></a>1 Introduction of Graph</h1><h2 id="1-1-Undirected-Graph"><a href="#1-1-Undirected-Graph" class="headerlink" title="1.1 Undirected Graph"></a>1.1 Undirected Graph</h2><center><img src="/2022/03/25/Disjoint-Set/2.png" srcset="/img/loading.gif" lazyload width="60%" alt="Undirected Graph"></center>

<p>Graph $G=(V,E)$</p>
<p>$V=$ the set of all vertices (nodes);<br>$E=$ edges (arcs) between pairs of vertices.</p>
<p>Undirected Graph: each edge do NOT have direction, having a two-way relation.</p>
<span id="more"></span>
<hr>
<h2 id="1-2-Directed-Graph"><a href="#1-2-Directed-Graph" class="headerlink" title="1.2 Directed Graph"></a>1.2 Directed Graph</h2><center><img src="/2022/03/25/Disjoint-Set/3.png" srcset="/img/loading.gif" lazyload width="60%" alt="Directed Graph"></center>

<p>Directed Graph: every edges are directional.</p>
<hr>
<h2 id="1-3-Weighted-Graph"><a href="#1-3-Weighted-Graph" class="headerlink" title="1.3 Weighted Graph"></a>1.3 Weighted Graph</h2><center><img src="/2022/03/25/Disjoint-Set/4.png" srcset="/img/loading.gif" lazyload width="60%" alt="Weighted Graph"></center>

<p>Weighted Graph: each edge has an associated weight.</p>
<hr>
<h2 id="1-4-Terminologies"><a href="#1-4-Terminologies" class="headerlink" title="1.4 Terminologies"></a>1.4 Terminologies</h2><p><code>Vertex</code>: The node of a graph;<br><code>Edge</code>: The connection between two vertices;<br><code>Path</code>: The sequence of vertices from one vertex to another;<br><code>Path Length</code>: The number of edges in a path;<br><code>Cycle</code>: A path with same starting vertex and endpoint vertex;<br><code>Connectivity</code>: Two vertices are connected if there exists at least one path between them;<br><code>Degree of a Vertex</code>: The number of edges connecting the vertex in a unweighted graph;<br><code>In-Degree</code>: For weighted graph, the number of edges <strong>incident to</strong> a vertex, In-degree of vertex 2 is 3;<br><code>Out-Degree</code>: For weighted graph, the number of edges <strong>incident from</strong> a vertex, In-degree of vertex 2 is 1;</p>
<hr>
<h1 id="2-Disjoint-Set"><a href="#2-Disjoint-Set" class="headerlink" title="2 Disjoint Set"></a>2 Disjoint Set</h1><h2 id="2-1-Introduction"><a href="#2-1-Introduction" class="headerlink" title="2.1 Introduction"></a>2.1 Introduction</h2><center><img src="/2022/03/25/Disjoint-Set/5.png" srcset="/img/loading.gif" lazyload width="60%" alt="Graph"></center>

<p>In graph, <strong>Disjoint set</strong> (并查集) can help us quickly check (Find) whether given two vertices is <strong>connected</strong> or not, e.g., vertex 1,3 are connected for there is a path 1-0-2-3, vertex 3,5 is not connected for there is no path from 3 to 5. It also can help us <strong>union</strong> two disjoint set into a set and maintain their relationship. </p>
<blockquote>
<p>The main point for the disjoint set function is to <strong>check whether two vertices have a same parent root vertex, if yes, then there are connected</strong>, e.g. root vertex of 1 and 3 is vertex 0, so they are connected, and the root vertex of 3 is 0, root vertex of 5 is 4, so having different root means 3 and 5 are not connected. </p>
</blockquote>
<hr>
<h3 id="2-1-1-Basic-Disjoint-Set-Implementation"><a href="#2-1-1-Basic-Disjoint-Set-Implementation" class="headerlink" title="2.1.1 Basic Disjoint Set Implementation:"></a>2.1.1 Basic Disjoint Set Implementation:</h3><ul>
<li><strong>Union</strong> function to add node into the disjoint set.</li>
</ul>
<p>A root array, each index represent each vertex; the value of each element refers to vertex’s <strong>parent</strong></p>
<center><img src="/2022/03/25/Disjoint-Set/7.png" srcset="/img/loading.gif" lazyload width="90%" alt="Basic Disjoint Set Implementation - Union"></center>

<hr>
<ul>
<li><strong>check</strong> function, using <strong>find</strong> function to find the parent of the vertex until the parent of the vertex is itself means the root is found, then compare whether their root is same or not, same means connected.</li>
</ul>
<center><img src="/2022/03/25/Disjoint-Set/8.png" srcset="/img/loading.gif" lazyload width="90%" alt="Basic Disjoint Set Implementation - Find"></center>


<hr>
<h2 id="2-2-Quick-Find"><a href="#2-2-Quick-Find" class="headerlink" title="2.2 Quick Find"></a>2.2 Quick Find</h2><p>Disjoint Set has two main function- Union and Find;</p>
<blockquote>
<p><strong>Quick Find</strong> is a optimization of <strong>Find</strong> function of generic disjoint set by storing the <strong>root node</strong> of vertices in the root array.</p>
</blockquote>
<p><strong>Advantage</strong>:<br>It directly stores the root node of a vertex in the root array instead of the parent node, which makes the Find function become access the value of the index in the array, making the Find function much faster.</p>
<p><strong>Drawback</strong>:<br>But it slows down the Union function, because the root array stores root(s) of each node in the disjoint set, every Union function needs to update a specific root, which is found by traversing the entire set. For Union(A,B), we have to every node has a same root as root(B), and then update them to root(A)</p>
<p><strong>Directly stores the root node of a vertex in the root array</strong>:</p>
<center><img src="/2022/03/25/Disjoint-Set/9.png" srcset="/img/loading.gif" lazyload width="90%" alt="Quick Find"></center>

<p><strong>Faster finding, just access the value at the index</strong>:</p>
<center><img src="/2022/03/25/Disjoint-Set/11.png" srcset="/img/loading.gif" lazyload width="90%" alt="Quick Find"></center>

<p><strong>Slow down the union function</strong>, for entire set traversing, especially union a big set:</p>
<center><img src="/2022/03/25/Disjoint-Set/10.png" srcset="/img/loading.gif" lazyload width="90%" alt="Quick Find"></center>

<p>Java implementation:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">QuickFind</span> &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span>[] root;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">QuickFind</span><span class="hljs-params">(<span class="hljs-type">int</span> size)</span> &#123;<br>        root = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[size];<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; size; i++) &#123;<br>            root[i] = i;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">find</span><span class="hljs-params">(<span class="hljs-type">int</span> x)</span> &#123; <span class="hljs-comment">// Directly stores the root node</span><br>        <span class="hljs-keyword">return</span> root[x]; <span class="hljs-comment">// return the value of index as the root</span><br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">union</span><span class="hljs-params">(<span class="hljs-type">int</span> x, <span class="hljs-type">int</span> y)</span> &#123;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">rootX</span> <span class="hljs-operator">=</span> find(x);<br>        <span class="hljs-type">int</span> <span class="hljs-variable">rootY</span> <span class="hljs-operator">=</span> find(y);<br>        <span class="hljs-keyword">if</span> (rootX != rootY) &#123;<br>            <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; root.length; i++) &#123; <span class="hljs-comment">// Traversing entire set</span><br>                <span class="hljs-keyword">if</span> (root[i] == rootY) &#123; <span class="hljs-comment">// Who has the same root as y,</span><br>                    root[i] = rootX; <span class="hljs-comment">// change its root to root of x</span><br>                &#125;<br>            &#125;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isConnected</span><span class="hljs-params">(<span class="hljs-type">int</span> x, <span class="hljs-type">int</span> y)</span> &#123;<br>        <span class="hljs-keyword">return</span> find(x) == find(y);<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getRootArr</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-type">StringBuilder</span> <span class="hljs-variable">sb</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuilder</span>();<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i:root) &#123;<br>            sb.append(Integer.toString(i));<br>        &#125;<br>        <span class="hljs-keyword">return</span> sb.toString();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>Run the test code:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br>        <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>            <span class="hljs-type">QuickFind</span> <span class="hljs-variable">qf</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">QuickFind</span>(<span class="hljs-number">7</span>);<br><br>            qf.union(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>);<br>            qf.union(<span class="hljs-number">0</span>, <span class="hljs-number">2</span>);<br>            qf.union(<span class="hljs-number">2</span>, <span class="hljs-number">3</span>);<br>            qf.union(<span class="hljs-number">4</span>, <span class="hljs-number">5</span>);<br>            qf.union(<span class="hljs-number">4</span>, <span class="hljs-number">6</span>);<br><br>            System.out.println(qf.isConnected(<span class="hljs-number">1</span>, <span class="hljs-number">3</span>)); <br>            System.out.println(qf.isConnected(<span class="hljs-number">1</span>, <span class="hljs-number">5</span>)); <br>            System.out.println(qf.getRootArr().toString()); <br><br>            uf.union(<span class="hljs-number">3</span>, <span class="hljs-number">5</span>);<br>            System.out.println(qf.isConnected(<span class="hljs-number">1</span>, <span class="hljs-number">5</span>));<br>            System.out.println(qf.getRootArr().toString());<br>        &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>Output:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-literal">true</span><br><span class="hljs-literal">false</span><br><span class="hljs-number">0000444</span><br><span class="hljs-literal">true</span><br><span class="hljs-number">0000000</span><br></code></pre></td></tr></table></figure>
<p><strong>Time Complexity</strong>:</p>
<p><code>find()</code>: $O(1)$, for accessing an element of the array at the given index.<br><code>union()</code>: $O(N)$, for traversing the entire array.</p>
<hr>
<h2 id="2-3-Quick-Union"><a href="#2-3-Quick-Union" class="headerlink" title="2.3 Quick Union"></a>2.3 Quick Union</h2><blockquote>
<p>Quick Union is actually the <strong>Basic Disjoint Set Implementation</strong> abovementioned, which optimizes the <strong>Union</strong> function compared with Quick Find. It store the <strong>parent root</strong> in the root array instead of the root node.</p>
</blockquote>
<p><strong>Advantage</strong>:<br>When union(A, B), only change the root of root of B to the root of A, then A and B will be connected, i.e. <code>root[find[A]] = find[B]</code>. No need to traverse the entire set like Quick Find, because we only store the parent node in the array, mean to be having less modify.</p>
<p><strong>Drawback</strong>:<br>Due to the root array only store the parent node, once we want to find the root of a node, we need to look up the parents through the array until find the top root, which means find whose root node is itself, <code>root[A] = A</code>. This process will take some time comparing with just accessing the value of index in Quick Find.</p>
<p>Java implementation:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">QuickUnion</span> &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span>[] root;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">QuickUnion</span><span class="hljs-params">(<span class="hljs-type">int</span> size)</span> &#123;<br>        root = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[size];<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; size; i++) &#123;<br>            root[i] = i;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">find</span><span class="hljs-params">(<span class="hljs-type">int</span> x)</span> &#123; <span class="hljs-comment">// Store the parent of the vertex</span><br>        <span class="hljs-keyword">while</span> (root[x] != x) &#123; <span class="hljs-comment">// Loop until find the root</span><br>            x = root[x];<br>        &#125;<br>        <span class="hljs-keyword">return</span> x;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">union</span><span class="hljs-params">(<span class="hljs-type">int</span> x, <span class="hljs-type">int</span> y)</span> &#123;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">rootX</span> <span class="hljs-operator">=</span> find(x);<br>        <span class="hljs-type">int</span> <span class="hljs-variable">rootY</span> <span class="hljs-operator">=</span> find(y);<br>        <span class="hljs-keyword">if</span> (rootX != rootY) &#123;<br>           root[rootY] = rootX; <span class="hljs-comment">// Union just operates the root node</span><br>        &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isConnected</span><span class="hljs-params">(<span class="hljs-type">int</span> x, <span class="hljs-type">int</span> y)</span> &#123;<br>        <span class="hljs-keyword">return</span> find(x) == find(y);<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getRootArr</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-type">StringBuilder</span> <span class="hljs-variable">sb</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuilder</span>();<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i:root) &#123;<br>            sb.append(Integer.toString(i));<br>        &#125;<br>        <span class="hljs-keyword">return</span> sb.toString();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>Run the test code:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br>        <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>            <span class="hljs-type">QuickUnion</span> <span class="hljs-variable">qu</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">QuickUnion</span>(<span class="hljs-number">7</span>);<br><br>            qu.union(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>);<br>            qu.union(<span class="hljs-number">0</span>, <span class="hljs-number">2</span>);<br>            qu.union(<span class="hljs-number">2</span>, <span class="hljs-number">3</span>);<br>            qu.union(<span class="hljs-number">4</span>, <span class="hljs-number">5</span>);<br>            qu.union(<span class="hljs-number">4</span>, <span class="hljs-number">6</span>);<br><br>            System.out.println(qu.isConnected(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>)); <span class="hljs-comment">// true</span><br>            System.out.println(qu.isConnected(<span class="hljs-number">3</span>, <span class="hljs-number">5</span>)); <span class="hljs-comment">// false</span><br>            System.out.println(qu.getRootArr().toString());<br><br>            qu.union(<span class="hljs-number">3</span>, <span class="hljs-number">5</span>);<br>            System.out.println(qu.isConnected(<span class="hljs-number">1</span>, <span class="hljs-number">5</span>)); <span class="hljs-comment">// true</span><br>            System.out.println(qu.getRootArr().toString());<br>        &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>Output:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-literal">true</span><br><span class="hljs-literal">false</span><br><span class="hljs-number">0000444</span><br><span class="hljs-literal">true</span><br><span class="hljs-number">0000044</span><br></code></pre></td></tr></table></figure>
<p><strong>Time Complexity</strong>:</p>
<p><code>find()</code>: $\le O(N)$, for the worst case, we have to traverse all vertices to get the root, e.g. all vertices connected in a line<br><code>union()</code>: $\le O(N)$, it composites two <code>find()</code> functions, in the worst case, it also takes $O(N)$ time.</p>
<hr>
<p><strong>Quick Union is more efficient than Quick Find</strong>:</p>
<p>In all, for a <code>N</code>-disjoint set,</p>
<p><strong>Quick Find</strong> take <strong>exactly</strong> $N\times O(N)= O(N^2)$ time;<br><strong>Quick Union</strong> take <strong>at most</strong> $N\times O(N)= O(N^2)$ time.</p>
<hr>
<h2 id="2-5-Union-by-Rank-Optimized-Union"><a href="#2-5-Union-by-Rank-Optimized-Union" class="headerlink" title="2.5 Union by Rank - Optimized Union"></a>2.5 Union by Rank - Optimized Union</h2><p>Abovementioned, Quick Union will take $O(N^2)$ in the worst case when all vertices connected in a line:</p>
<center><img src="/2022/03/25/Disjoint-Set/12.png" srcset="/img/loading.gif" lazyload width="50%" alt="Union by Rank"></center>

<blockquote>
<p>We can optimize Quick Union by assigning each vertex a <strong>rank</strong> attribute, which indicate the <strong>height</strong> of each node, e.g., the height of node 0 is 1, node 4 is 5 in above picture.</p>
</blockquote>
<p>When connecting two root node, <strong>we choose the root with larger rank as the parent node of another</strong>, which can make the rank of each node unchanged. Otherwise, the highest rank will be increased. </p>
<center><img src="/2022/03/25/Disjoint-Set/13.png" srcset="/img/loading.gif" lazyload width="80%" alt="Union by Rank"></center>

<p>Java implementation:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">QuickUnion</span> &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span>[] root;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span>[] rank; <span class="hljs-comment">// rank attribute</span><br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">QuickUnion</span><span class="hljs-params">(<span class="hljs-type">int</span> size)</span> &#123;<br>        root = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[size];<br>        rank = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[size];<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; size; i++) &#123;<br>            root[i] = i;<br>            rank[i] = <span class="hljs-number">1</span>; <span class="hljs-comment">// initial the rank as 1</span><br>        &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">find</span><span class="hljs-params">(<span class="hljs-type">int</span> x)</span> &#123;<br>        <span class="hljs-keyword">while</span> (root[x] != x) &#123;<br>            x = root[x];<br>        &#125;<br>        <span class="hljs-keyword">return</span> x;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">union</span><span class="hljs-params">(<span class="hljs-type">int</span> x, <span class="hljs-type">int</span> y)</span> &#123;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">rootX</span> <span class="hljs-operator">=</span> find(x);<br>        <span class="hljs-type">int</span> <span class="hljs-variable">rootY</span> <span class="hljs-operator">=</span> find(y);<br>        <span class="hljs-keyword">if</span> (rootX != rootY) &#123;<br>            <span class="hljs-comment">// choose the root with larger rank as parent</span><br>            <span class="hljs-keyword">if</span> (rank[rootX] &gt; rank[rootY]) &#123; <br>                root[rootY] = rootX;<br>            &#125; <br>            <span class="hljs-comment">// choose the root with larger rank as parent</span><br>            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (rank[rootX] &lt; rank[rootY]) &#123; <br>                root[rootX] = rootY;<br>            &#125; <br>            <span class="hljs-comment">// if same rank</span><br>            <span class="hljs-keyword">else</span> &#123; <br>                root[rootY] = rootX; <span class="hljs-comment">// choose x as parent by default</span><br>                rank[rootX] += <span class="hljs-number">1</span>; <span class="hljs-comment">// increasing the rank of x by 1</span><br>            &#125;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isConnected</span><span class="hljs-params">(<span class="hljs-type">int</span> x, <span class="hljs-type">int</span> y)</span> &#123;<br>        <span class="hljs-keyword">return</span> find(x) == find(y);<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getRootArr</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-type">StringBuilder</span> <span class="hljs-variable">sb</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuilder</span>();<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i:root) &#123;<br>            sb.append(Integer.toString(i));<br>        &#125;<br>        <span class="hljs-keyword">return</span> sb.toString();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>Test for the <strong>worst</strong> case:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br>        <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>            <span class="hljs-type">QuickUnion</span> <span class="hljs-variable">qu</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">QuickUnion</span>(<span class="hljs-number">5</span>);<br><br>            qu.union(<span class="hljs-number">1</span>, <span class="hljs-number">0</span>);<br>            qu.union(<span class="hljs-number">2</span>, <span class="hljs-number">0</span>);<br>            qu.union(<span class="hljs-number">3</span>, <span class="hljs-number">0</span>);<br>            qu.union(<span class="hljs-number">4</span>, <span class="hljs-number">0</span>);<br><br>            System.out.println(qu.getRootArr().toString());<br>        &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>Output:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-number">11111</span><br></code></pre></td></tr></table></figure>
<p>which is:</p>
<center><img src="/2022/03/25/Disjoint-Set/14.png" srcset="/img/loading.gif" lazyload width="60%" alt="Union by Rank"></center>

<p><strong>Time Complexity</strong>:</p>
<p><code>find()</code>: $\le O(\log N)$, for the worst case, we have to traverse all vertices to get the root, e.g. all vertices connected in a line<br><code>union()</code>: $\le O(\log N)$, it composites two <code>find()</code> functions, in the worst case, it also takes $O(N)$ time.</p>
<hr>
<h2 id="2-6-Path-Compression-Optimized-Find"><a href="#2-6-Path-Compression-Optimized-Find" class="headerlink" title="2.6 Path Compression - Optimized Find"></a>2.6 Path Compression - Optimized Find</h2><p>In the above Quick Union, we find the root of a node by traversing, if we want to find its root again, we have to repeat the traversing again. We can optimize it by <strong>Path Compression</strong>, which can <strong>update the parent node of each traversed one to the finally found root node</strong>, then when we find the root again, the root has already been stored in the array, saving a lot of time. This optimization can be done with <strong>recursion</strong>. </p>
<center><img src="/2022/03/25/Disjoint-Set/15.png" srcset="/img/loading.gif" lazyload width="60%" alt="Path Compression"></center>

<p>Java implementation:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">QuickUnion</span> &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span>[] root;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">QuickUnion</span><span class="hljs-params">(<span class="hljs-type">int</span> size)</span> &#123;<br>        root = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[size];<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; size; i++) &#123;<br>            root[i] = i;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">find</span><span class="hljs-params">(<span class="hljs-type">int</span> x)</span> &#123;<br>        <span class="hljs-keyword">if</span> (root[x] == x) &#123;<br>            <span class="hljs-keyword">return</span> x;<br>        &#125;<br>        <span class="hljs-comment">// Recursively updating each traversed node</span><br>        <span class="hljs-keyword">return</span> root[x] = find(root[x]); <br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">union</span><span class="hljs-params">(<span class="hljs-type">int</span> x, <span class="hljs-type">int</span> y)</span> &#123;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">rootX</span> <span class="hljs-operator">=</span> find(x);<br>        <span class="hljs-type">int</span> <span class="hljs-variable">rootY</span> <span class="hljs-operator">=</span> find(y);<br>        <span class="hljs-keyword">if</span> (rootX != rootY) &#123;<br>           root[rootY] = rootX;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isConnected</span><span class="hljs-params">(<span class="hljs-type">int</span> x, <span class="hljs-type">int</span> y)</span> &#123;<br>        <span class="hljs-keyword">return</span> find(x) == find(y);<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getRootArr</span><span class="hljs-params">()</span>&#123;<br>        <span class="hljs-type">StringBuilder</span> <span class="hljs-variable">sb</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">StringBuilder</span>();<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> i:root) &#123;<br>            sb.append(Integer.toString(i));<br>        &#125;<br>        <span class="hljs-keyword">return</span> sb.toString();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>Test for the <strong>worst</strong> case:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Main</span> &#123;<br>        <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>            <span class="hljs-type">QuickUnion</span> <span class="hljs-variable">qu</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">QuickUnion</span>(<span class="hljs-number">5</span>);<br><br>            qu.union(<span class="hljs-number">0</span>, <span class="hljs-number">1</span>);<br>            qu.union(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>);<br>            qu.union(<span class="hljs-number">2</span>, <span class="hljs-number">3</span>);<br>            qu.union(<span class="hljs-number">3</span>, <span class="hljs-number">4</span>);<br><br>            System.out.println(qu.getRootArr().toString());<br>        &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p>Output:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-number">00000</span><br></code></pre></td></tr></table></figure>
<p><strong>Time Complexity</strong>:</p>
<p><code>find()</code>: $O(\log N)$ on average;<br><code>union()</code>: $O(\log N)$ on average.</p>
<hr>
<h2 id="2-7-Optimized-Disjoint-Set"><a href="#2-7-Optimized-Disjoint-Set" class="headerlink" title="2.7 Optimized Disjoint Set"></a>2.7 Optimized Disjoint Set</h2><p>Implement Disjoint set with optimization of both <strong>Union by Rank</strong> and <strong>Path Compression</strong>.</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">class</span> <span class="hljs-title class_">QuickUnion</span> &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span>[] root;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span>[] rank; <span class="hljs-comment">// rank attribute</span><br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">QuickUnion</span><span class="hljs-params">(<span class="hljs-type">int</span> size)</span> &#123;<br>        root = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[size];<br>        rank = <span class="hljs-keyword">new</span> <span class="hljs-title class_">int</span>[size];<br>        <span class="hljs-keyword">for</span> (<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>; i &lt; size; i++) &#123;<br>            root[i] = i;<br>            rank[i] = <span class="hljs-number">1</span>; <span class="hljs-comment">// initial the rank as 1</span><br>        &#125;<br>    &#125;<br>    <span class="hljs-comment">// Path Compression</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">find</span><span class="hljs-params">(<span class="hljs-type">int</span> x)</span> &#123;<br>        <span class="hljs-keyword">if</span> (root[x] == x) &#123;<br>            <span class="hljs-keyword">return</span> x;<br>        &#125;<br>        <span class="hljs-comment">// Recursively updating each traversed node</span><br>        <span class="hljs-keyword">return</span> root[x] = find(root[x]); <br>    &#125;<br>    <span class="hljs-comment">// Union by Rank</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">union</span><span class="hljs-params">(<span class="hljs-type">int</span> x, <span class="hljs-type">int</span> y)</span> &#123;<br>        <span class="hljs-type">int</span> <span class="hljs-variable">rootX</span> <span class="hljs-operator">=</span> find(x);<br>        <span class="hljs-type">int</span> <span class="hljs-variable">rootY</span> <span class="hljs-operator">=</span> find(y);<br>        <span class="hljs-keyword">if</span> (rootX != rootY) &#123;<br>            <span class="hljs-comment">// choose the root with larger rank as parent</span><br>            <span class="hljs-keyword">if</span> (rank[rootX] &gt; rank[rootY]) &#123; <br>                root[rootY] = rootX;<br>            &#125; <br>            <span class="hljs-comment">// choose the root with larger rank as parent</span><br>            <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span> (rank[rootX] &lt; rank[rootY]) &#123; <br>                root[rootX] = rootY;<br>            &#125; <br>            <span class="hljs-comment">// if same rank</span><br>            <span class="hljs-keyword">else</span> &#123; <br>                root[rootY] = rootX; <span class="hljs-comment">// choose x as parent by default</span><br>                rank[rootX] += <span class="hljs-number">1</span>; <span class="hljs-comment">// increasing the rank of x by 1</span><br>            &#125;<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">boolean</span> <span class="hljs-title function_">isConnected</span><span class="hljs-params">(<span class="hljs-type">int</span> x, <span class="hljs-type">int</span> y)</span> &#123;<br>        <span class="hljs-keyword">return</span> find(x) == find(y);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<blockquote>
<p>Problem:<br>After path compression, every node below the root will become the direct child of the root, which makes the actual rank value differ from the one store in rank array. It will make the Union By Rank inaccurate. The solution may be (a) using just one optimization in implementation, or (b) using the number of node to replace height of the node for the Rank attribute. </p>
</blockquote>
<hr>
<p>Last updated on 2022-03-31</p>
<hr>
<h1 id="References"><a href="#References" class="headerlink" title="References"></a>References</h1><p><a target="_blank" rel="noopener" href="https://leetcode.com/explore/learn/card/graph/">Graph - Explore - LeetCode</a></p>
<hr>
<h1 id="写在最后"><a href="#写在最后" class="headerlink" title="写在最后"></a>写在最后</h1><p>Disjoint Set 和 Graph 相关的知识会继续学习，继续更新.<br>最后，希望大家一起交流，分享，指出问题，谢谢！</p>
<hr>
<p><strong><em>原创文章，转载请标明出处</em></strong><br><strong><em>Made by Mike_Zhang</em></strong></p>
<center><img src="https://ultrafish-blog.oss-cn-hangzhou.aliyuncs.com/blog3/logo3.gif?versionId=CAEQGxiBgIDY95eb1xciIGY2MzBlMTcyY2NlNzQ0MjE5Y2MyZGM5MGE0NDQ3YzQ2" srcset="/img/loading.gif" lazyload width height><br><br></center>
<center><img src="https://ultrafish-blog.oss-cn-hangzhou.aliyuncs.com/reward.jpg?versionId=CAEQGxiBgIDPm9ir1xciIGJkMDY1ZGMwYmViOTQ4ZTA5NGQ0MDMyMDg1OWQ2ZTZi" srcset="/img/loading.gif" lazyload width="25%" height>
<br>
    <div style="color:orange; 
    border-bottom: 15px solid rgba(0,0,0,0);
    display: inline-block;
    color: #999;
    padding: 0px;">感谢你的支持</div></center>

              
            </div>
            <hr/>
            <div>
              <div class="post-metas my-3">
  
    <div class="post-meta mr-3 d-flex align-items-center">
      <i class="iconfont icon-category"></i>
      

<span class="category-chains">
  
  
    
      <span class="category-chain">
        
  <a href="/categories/Data-Structure-and-Algorithm/" class="category-chain-item">Data Structure and Algorithm</a>
  
  
    <span>></span>
    
  <a href="/categories/Data-Structure-and-Algorithm/Data-Structure/" class="category-chain-item">Data Structure</a>
  
  
    <span>></span>
    
  <a href="/categories/Data-Structure-and-Algorithm/Data-Structure/Disjoint-Set/" class="category-chain-item">Disjoint Set</a>
  
  

  

  

      </span>
    
  
</span>

    </div>
  
  
    <div class="post-meta">
      <i class="iconfont icon-tags"></i>
      
        <a href="/tags/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/">#数据结构</a>
      
        <a href="/tags/Java/">#Java</a>
      
        <a href="/tags/Graph/">#Graph</a>
      
        <a href="/tags/Disjoint-Set/">#Disjoint-Set</a>
      
    </div>
  
</div>


              
  

  <div class="license-box my-3">
    <div class="license-title">
      <div>数据结构与算法 - Disjoint Set (持续更新)</div>
      <div>https://ultrafish.cn/2022/03/25/Disjoint-Set/</div>
    </div>
    <div class="license-meta">
      
        <div class="license-meta-item">
          <div>作者</div>
          <div>Mike_Zhang</div>
        </div>
      
      
        <div class="license-meta-item license-meta-date">
          <div>发布于</div>
          <div>2022年3月25日</div>
        </div>
      
      
      <div class="license-meta-item">
        <div>许可协议</div>
        <div>
          
            
            
              <a target="_blank" href="https://creativecommons.org/licenses/by-sa/4.0/">
              <span class="hint--top hint--rounded" aria-label="BY - 署名">
                <i class="iconfont icon-by"></i>
              </span>
              </a>
            
              <a target="_blank" href="https://creativecommons.org/licenses/by-sa/4.0/">
              <span class="hint--top hint--rounded" aria-label="SA - 相同方式共享">
                <i class="iconfont icon-sa"></i>
              </span>
              </a>
            
          
        </div>
      </div>
    </div>
    <div class="license-icon iconfont"></div>
  </div>



              
                <div class="post-prevnext my-3">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2022/04/08/Naive-Bayes-Classifier-on-Text-Classification/" title="朴素贝叶斯文本分类器 Naive Bayes Classifier on Text Classification">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">朴素贝叶斯文本分类器 Naive Bayes Classifier on Text Classification</span>
                        <span class="visible-mobile">上一篇</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2022/03/14/Array/" title="数据结构与算法 - Array (持续更新)">
                        <span class="hidden-mobile">数据结构与算法 - Array (持续更新)</span>
                        <span class="visible-mobile">下一篇</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
  <article id="comments" lazyload>
    
  <div id="valine"></div>
  <script type="text/javascript">
    Fluid.utils.loadComments('#valine', function() {
      Fluid.utils.createScript('https://lib.baomitu.com/valine/1.4.16/Valine.min.js', function() {
        var options = Object.assign(
          {"appId":"xPfvtHmxSDcqGwKW6R8EEWXM-gzGzoHsz","appKey":"jVB4RsyHUFfRbEhhlssoxEVQ","path":"window.location.pathname","placeholder":"说点什么吧(记得写上你的昵称哦)","avatar":"mp","meta":["nick","mail"],"requiredFields":["nick"],"pageSize":10,"lang":"zh-CN","highlight":true,"recordIP":false,"serverURLs":"","emojiCDN":null,"emojiMaps":null,"enableQQ":true},
          {
            el: "#valine",
            path: window.location.pathname
          }
        )
        new Valine(options);
        Fluid.utils.waitElementVisible('#valine .vcontent', () => {
          var imgSelector = '#valine .vcontent img:not(.vemoji)';
          Fluid.plugins.imageCaption(imgSelector);
          Fluid.plugins.fancyBox(imgSelector);
        })
      });
    });
  </script>
  <noscript>Please enable JavaScript to view the comments</noscript>


  </article>


          </article>
        </div>
      </div>
    </div>

    <div class="side-col d-none d-lg-block col-lg-2">
      
  <aside class="sidebar" style="margin-left: -1rem">
    <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;目录</p>
  <div class="toc-body" id="toc-body"></div>
</div>



  </aside>


    </div>
  </div>
</div>





  



  



  



  



  


  
  








    

    
      <a id="scroll-top-button" aria-label="TOP" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">搜索</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v" for="local-search-input">关键词</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>

    

    
  </main>

  <footer>
    <footer class="text-center mt-5 py-3" style="font-size:small;">
<div class="footer-inner">
  
  
    <div class="statistics">
  
  

  
    
      <span id="leancloud-site-pv-container" style="display: none">
        总访问量 
        <span id="leancloud-site-pv"></span>
         次
      </span>
    
    
      <span id="leancloud-site-uv-container" style="display: none">
        总访客数 
        <span id="leancloud-site-uv"></span>
         人
      </span>
    
    

  
</div>

  
  
    <!-- 备案信息 ICP for China -->
    <div class="beian">
  <span>
    <a href="http://beian.miit.gov.cn/" target="_blank" rel="nofollow noopener">
      浙ICP备2020036956号
    </a>
  </span>
  
    
      <span>
        <a
          href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=33042102000661"
          rel="nofollow noopener"
          class="beian-police"
          target="_blank"
        >
          
            <span style="visibility: hidden; width: 0">|</span>
            <img src="/img/police_beian.png" srcset="/img/loading.gif" lazyload alt="police-icon"/>
          
          <span>浙公网安备33042102000661号</span>
        </a>
      </span>
    
  
</div>

  
  
  <div class="footer" >
    Copyright &copy; 2020-2022 Mike_Zhang. All rights reserved.
  </div>
</div>



</footer>
  </footer>

  <!-- Scripts -->
  
  <script  src="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://lib.baomitu.com/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":100})
    NProgress.start()
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://lib.baomitu.com/jquery/3.6.0/jquery.min.js" ></script>
<script  src="https://lib.baomitu.com/twitter-bootstrap/4.6.1/js/bootstrap.min.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>


  <script  src="https://lib.baomitu.com/typed.js/2.0.12/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var subtitle = document.getElementById('subtitle');
      if (!subtitle || !typing) {
        return;
      }
      var text = subtitle.getAttribute('data-typed-text');
      
        typing(text);
      
    })(window, document);
  </script>




  

  

  

  

  

  

  
    
  




  
    <script  src="/js/img-lazyload.js" ></script>
  




  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/tocbot/4.18.0/tocbot.min.js', function() {
    var toc = jQuery('#toc');
    if (toc.length === 0 || !window.tocbot) { return; }
    var boardCtn = jQuery('#board-ctn');
    var boardTop = boardCtn.offset().top;

    window.tocbot.init({
      tocSelector     : '#toc-body',
      contentSelector : '.markdown-body',
      headingSelector : CONFIG.toc.headingSelector || 'h1,h2,h3,h4,h5,h6',
      linkClass       : 'tocbot-link',
      activeLinkClass : 'tocbot-active-link',
      listClass       : 'tocbot-list',
      isCollapsedClass: 'tocbot-is-collapsed',
      collapsibleClass: 'tocbot-is-collapsible',
      collapseDepth   : CONFIG.toc.collapseDepth || 0,
      scrollSmooth    : true,
      headingsOffset  : -boardTop
    });
    if (toc.find('.toc-list-item').length > 0) {
      toc.css('visibility', 'visible');
    }
  });
</script>


  <script>
  (function() {
    var enableLang = CONFIG.code_language.enable && CONFIG.code_language.default;
    var enableCopy = CONFIG.copy_btn;
    if (!enableLang && !enableCopy) {
      return;
    }

    function getBgClass(ele) {
      return Fluid.utils.getBackgroundLightness(ele) >= 0 ? 'code-widget-light' : 'code-widget-dark';
    }

    var copyTmpl = '';
    copyTmpl += '<div class="code-widget">';
    copyTmpl += 'LANG';
    copyTmpl += '</div>';
    jQuery('.markdown-body pre').each(function() {
      var $pre = jQuery(this);
      if ($pre.find('code.mermaid').length > 0) {
        return;
      }
      if ($pre.find('span.line').length > 0) {
        return;
      }

      var lang = '';

      if (enableLang) {
        lang = CONFIG.code_language.default;
        if ($pre[0].children.length > 0 && $pre[0].children[0].classList.length >= 2 && $pre.children().hasClass('hljs')) {
          lang = $pre[0].children[0].classList[1];
        } else if ($pre[0].getAttribute('data-language')) {
          lang = $pre[0].getAttribute('data-language');
        } else if ($pre.parent().hasClass('sourceCode') && $pre[0].children.length > 0 && $pre[0].children[0].classList.length >= 2) {
          lang = $pre[0].children[0].classList[1];
          $pre.parent().addClass('code-wrapper');
        } else if ($pre.parent().hasClass('markdown-body') && $pre[0].classList.length === 0) {
          $pre.wrap('<div class="code-wrapper"></div>');
        }
        lang = lang.toUpperCase().replace('NONE', CONFIG.code_language.default);
      }
      $pre.append(copyTmpl.replace('LANG', lang).replace('code-widget">',
        getBgClass($pre[0]) + (enableCopy ? ' code-widget copy-btn" data-clipboard-snippet><i class="iconfont icon-copy"></i>' : ' code-widget">')));

      if (enableCopy) {
        Fluid.utils.createScript('https://lib.baomitu.com/clipboard.js/2.0.10/clipboard.min.js', function() {
          var clipboard = new window.ClipboardJS('.copy-btn', {
            target: function(trigger) {
              var nodes = trigger.parentNode.childNodes;
              for (var i = 0; i < nodes.length; i++) {
                if (nodes[i].tagName === 'CODE') {
                  return nodes[i];
                }
              }
            }
          });
          clipboard.on('success', function(e) {
            e.clearSelection();
            e.trigger.innerHTML = e.trigger.innerHTML.replace('icon-copy', 'icon-success');
            setTimeout(function() {
              e.trigger.innerHTML = e.trigger.innerHTML.replace('icon-success', 'icon-copy');
            }, 2000);
          });
        });
      }
    });
  })();
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/anchor-js/4.3.1/anchor.min.js', function() {
    window.anchors.options = {
      placement: CONFIG.anchorjs.placement,
      visible  : CONFIG.anchorjs.visible
    };
    if (CONFIG.anchorjs.icon) {
      window.anchors.options.icon = CONFIG.anchorjs.icon;
    }
    var el = (CONFIG.anchorjs.element || 'h1,h2,h3,h4,h5,h6').split(',');
    var res = [];
    for (var item of el) {
      res.push('.markdown-body > ' + item.trim());
    }
    if (CONFIG.anchorjs.placement === 'left') {
      window.anchors.options.class = 'anchorjs-link-left';
    }
    window.anchors.add(res.join(', '));
  });
</script>


  
<script>
  Fluid.utils.createScript('https://lib.baomitu.com/fancybox/3.5.7/jquery.fancybox.min.js', function() {
    Fluid.plugins.fancyBox();
  });
</script>


  <script>Fluid.plugins.imageCaption();</script>

  
      <script>
        MathJax = {
          tex    : {
            inlineMath: { '[+]': [['$', '$']] }
          },
          loader : {
            load: ['ui/lazy']
          },
          options: {
            renderActions: {
              findScript    : [10, doc => {
                document.querySelectorAll('script[type^="math/tex"]').forEach(node => {
                  const display = !!node.type.match(/; *mode=display/);
                  const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
                  const text = document.createTextNode('');
                  node.parentNode.replaceChild(text, node);
                  math.start = { node: text, delim: '', n: 0 };
                  math.end = { node: text, delim: '', n: 0 };
                  doc.math.push(math);
                });
              }, '', false],
              insertedScript: [200, () => {
                document.querySelectorAll('mjx-container').forEach(node => {
                  let target = node.parentNode;
                  if (target.nodeName.toLowerCase() === 'li') {
                    target.parentNode.classList.add('has-jax');
                  }
                });
              }, '', false]
            }
          }
        };
      </script>
    

  <script  src="https://lib.baomitu.com/mathjax/3.2.0/es5/tex-mml-chtml.js" ></script>

  <script  src="/js/local-search.js" ></script>

  <script defer src="/js/leancloud.js" ></script>





<!-- 主题的启动项，将它保持在最底部 -->
<!-- the boot of the theme, keep it at the bottom -->
<script  src="/js/boot.js" ></script>


  

  <noscript>
    <div class="noscript-warning">博客在允许 JavaScript 运行的环境下浏览效果更佳</div>
  </noscript>
</body>
</html>
